---
- name: Ejecuta script en localhost
  hosts: localhost
  gather_facts: false
  tasks:
    - name: Dame estado del objeto
      ansible.builtin.stat:
        path: /tmp/prueba2.sh
      register: sym

    - name: Print a debug message
      ansible.builtin.debug:
        msg: "islnk isn't defined (path doesn't exist)"
      when: sym.stat.islnk is not defined
      
    - name: Print a debug message
      ansible.builtin.debug:
        msg: "islnk is defined (path must exist)"
      when: sym.stat.islnk is defined

    - name: Print a debug message
      ansible.builtin.debug:
        msg: "Path exists and is a symlink"
      when: sym.stat.islnk is defined and sym.stat.islnk

    - name: Print a debug message
      ansible.builtin.debug:
        msg: "Path exists and isn't a symlink"
      when: sym.stat.islnk is defined and sym.stat.islnk == False
  
    - name: Ejecuta script en localhost
      ansible.builtin.shell: "sh prueba2.sh"
      args:
        chdir: "/tmp/"
      #command: sh /tmp/prueba.sh
